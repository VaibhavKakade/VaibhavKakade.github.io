<!DOCTYPE html>
<html>
<head>
	<title>In Hand Amount Calculator</title>
	<link rel="stylesheet" href="bootstrap.min.css">
	<style>
		.inline-block {
			display: inline-block;
		}
		.centerAlign {
			width: 900px;
		    margin: auto;
		    margin-top: 20px;
		    background-color: #F7F7F9;
		    padding: 25px;
		    border: 1px solid #ddd;
		    border-radius: 5px;
		}
		.radio-container-padding {
			padding: 20px 10px;
		}
		.border-bottom {
			border-bottom: 1px solid #ddd;
		}
		.green {
			color: green;
		}
		#calculate {
			float: right;
			margin-top: 10px;
		}
		#ctc {
			height: 25px;
			margin-top: 20px;
		}
	</style>
</head>
<body>
	<div class="centerAlign">
		<div class="row show-grid">
			<div class="col-md-6">
				<h3> Enter You CTC (LPA) : </h3>
			</div>
			<div class="col-md-6">
				<input type="text" id="ctc" class="form-control">
			</div>
		</div>
		<div class="row show-grid border-bottom">
			<div class="col-md-6">
				<h3 class="inline-block">Gender:</h3>
			</div>
			<div class="col-md-6 radio-container-padding">
				<label class="radio-inline">
				  <input type="radio" name="gender" value="male" checked="true"> Male
				</label>
				<label class="radio-inline">
				  <input type="radio" name="gender" value="female"> Female
				</label>
			</div>
		</div>
		<div class="row show-grid">
			<button id="calculate" class="btn btn-primary">Calculate</button>
		</div>

		<div class="row show-grid">
			<h3 class="inHandCTC"></h3>
			<i>* Note : This in-hand amount is calculated assuming there are no savings. So the actual in-hand amount will be more after applying your savings (like home loan, investments under 80C etc...).</i>
		</div>
		<!-- <div>
		</div> -->
	</div>
</body>
</html>
<script type="text/javascript">
"use strict";
const onePointFiveLakh = 1.5e5,
	twoLakhs = 2e5,
	fiveLakhs = 5e5,
	tenLakhs = 10e5,
	fiftyLakhs = 50e5;

window.onload = function () {
	var btn = document.querySelector("#calculate");
	btn.addEventListener("click", calculateInHand);
};

function calculateInHand() {
	let annualCTC = document.querySelector("#ctc").value * 1e5;
	let result = [],
		gender = document.querySelector("input[type=radio]:checked").value,
		taxes = [{
			percentage: 0,
			range: [0, (gender=="male" ? onePointFiveLakh : twoLakhs)]
		}, {
			percentage: 10,
			range: [twoLakhs, fiveLakhs]
		}, {
			percentage: 20,
			range: [fiveLakhs, tenLakhs]
		}, {
			percentage: 30,
			range: [tenLakhs, fiftyLakhs]
		}];

	taxes.forEach((taxSlab) => {
		let amount = taxSlab.range[1] - taxSlab.range[0],
			taxToBeDeducted = 0;

		if (!(annualCTC < taxSlab.range[0] && annualCTC < taxSlab.range[1])) {
			if (annualCTC >= taxSlab.range[0] && annualCTC < taxSlab.range[1]) {
				amount = annualCTC - taxSlab.range[0];
			}
			taxToBeDeducted = (amount * (taxSlab.percentage / 100));
			result.push(amount - taxToBeDeducted);
		}
	});

	let inHandMoney = result.reduce((n1, n2) => n1 + n2);
	document.querySelector(".inHandCTC").innerHTML = "In Hand Amount = <span class='green'> " + Math.round(inHandMoney / 12) + " </span> INR";
}

calculateInHand();
</script>
